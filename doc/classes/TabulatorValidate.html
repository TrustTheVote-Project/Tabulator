<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: TabulatorValidate</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">TabulatorValidate</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/validate_rb.html">
                lib/validate.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="TabulatorValidate.html">TabulatorValidate</a> class is used to
validate the data sets that are imported into the <a
href="Tabulator.html">Tabulator</a>.
</p>
<p>
During the creation of a <a href="Tabulator.html">Tabulator</a> Count,
either initially from Jurisdiction and Election Definitions, or by
reinstantiation from file storage, it performs these additional operations:
</p>
<ol>
<li>Saves the names of all unique identifiers (UIDs)

</li>
<li>Constructs a data structure holding the Contest Counts for each Contest

</li>
<li>Constructs a data structure holding the Question Counts for each Question

</li>
<li>Constructs a data structure holding the Expected Counts

</li>
<li>Constructs a data structure holding the Accumulated Counts

</li>
</ol>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000010">new</a>&nbsp;&nbsp;
      <a href="#M000019">new_tabulator_count</a>&nbsp;&nbsp;
      <a href="#M000018">uid_add</a>&nbsp;&nbsp;
      <a href="#M000016">uid_exists?</a>&nbsp;&nbsp;
      <a href="#M000017">uids_exist?</a>&nbsp;&nbsp;
      <a href="#M000014">val_err</a>&nbsp;&nbsp;
      <a href="#M000013">val_fatal</a>&nbsp;&nbsp;
      <a href="#M000015">val_warn</a>&nbsp;&nbsp;
      <a href="#M000034">validate_candidate_counts</a>&nbsp;&nbsp;
      <a href="#M000027">validate_candidates</a>&nbsp;&nbsp;
      <a href="#M000033">validate_contest_counts</a>&nbsp;&nbsp;
      <a href="#M000026">validate_contests</a>&nbsp;&nbsp;
      <a href="#M000032">validate_counter_count</a>&nbsp;&nbsp;
      <a href="#M000037">validate_counter_counts</a>&nbsp;&nbsp;
      <a href="#M000029">validate_counters</a>&nbsp;&nbsp;
      <a href="#M000022">validate_districts</a>&nbsp;&nbsp;
      <a href="#M000025">validate_election</a>&nbsp;&nbsp;
      <a href="#M000024">validate_election_definition</a>&nbsp;&nbsp;
      <a href="#M000023">validate_errors_warnings</a>&nbsp;&nbsp;
      <a href="#M000031">validate_expected_counts</a>&nbsp;&nbsp;
      <a href="#M000020">validate_jurisdiction_definition</a>&nbsp;&nbsp;
      <a href="#M000021">validate_precincts</a>&nbsp;&nbsp;
      <a href="#M000035">validate_question_counts</a>&nbsp;&nbsp;
      <a href="#M000028">validate_questions</a>&nbsp;&nbsp;
      <a href="#M000030">validate_reporting_groups</a>&nbsp;&nbsp;
      <a href="#M000036">validate_tabulator_count</a>&nbsp;&nbsp;
      <a href="#M000011">validation_errors</a>&nbsp;&nbsp;
      <a href="#M000012">validation_warnings</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">UID_TYPES</td>
          <td>=</td>
          <td class="context-item-value">[&quot;jurisdiction&quot;, &quot;district&quot;, &quot;precinct&quot;, &quot;election&quot;,                &quot;reporting group&quot;, &quot;contest&quot;, &quot;candidate&quot;, &quot;question&quot;,                &quot;counter&quot;, &quot;file&quot;]</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
All of the election objects that can be given unique identifiers (UIDs).

</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">counts_accumulated</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Array</em> of accumulated counts, each sub-array of which contains
[Counter UID, Reporting Group, Precinct UID]

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">counts_contests</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Hash</em> with <em>Key</em>: Contest UID, <em>Value</em>: Contest
Count; holds all the Contest Counts, keyed by Contest UID

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">counts_expected</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Array</em> of expected counts, each sub-array of which contains
[Counter UID, Reporting Group, Precinct UID]

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">counts_questions</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Hash</em> with <em>Key</em>: Question UID, <em>Value</em>: Question
Count; holds all the Question Counts, keyed by Question UID

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">errors</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Array</em>, stack of error messages

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">tabulator_count</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Hash</em> with <em>Key</em>: &quot;tabulator_count&quot;,
<em>Value</em>: <a href="Tabulator.html">Tabulator</a> Count information;
holds the <a href="Tabulator.html">Tabulator</a> Count dataset currently in
effect.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">uids</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Hash</em> with <em>Key</em>: from <b><tt>UID_TYPES</b></tt>,
<em>Value</em>: <em>Array</em> of UIDs for that type; holds all the unique
identifiers (UIDs), plus the names of Reporting Groups, keyed by UID type

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">warnings</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
<em>Array</em>, stack of warning messages

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000010.html');return false;">
          <span class="method-name">new</span><span class="method-args">(jd = false, ed = false, file = false, tc = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>jd</em>: (<em>Hash</em>) Jurisdiction Definition (optional)

</li>
<li><em>ed</em>: (<em>Hash</em>) Election Definition (optional)

</li>
<li><em>file</em>: (<em>String</em>) File name for <a
href="TabulatorValidate.html#M000010">new</a> <a
href="Tabulator.html">Tabulator</a> Count (optional)

</li>
<li><em>tc</em>: (<em>Hash</em>) <a href="Tabulator.html">Tabulator</a> Count
(optional)

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
Initializes all attributes, each set to empty for its particular type (zero
for Integers), and then finishes by instantiating a <a
href="Tabulator.html">Tabulator</a> Count. One set of arguments must be
provided, either a Jurisdiction Definition, Election Definition, and File
Name as the 1st, 2nd, and 3rd args, or a <a
href="Tabulator.html">Tabulator</a> Count as the 4th arg.
</p>
<p>
If a Jurisdiction Definition, Election Definition, and File Name are
provided, they are validated and used to construct a <a
href="TabulatorValidate.html#M000010">new</a> <a
href="Tabulator.html">Tabulator</a> Count, which puts the <a
href="Tabulator.html">Tabulator</a> into its initial state, ready to accept
counting data.
</p>
<p>
If a <a href="Tabulator.html">Tabulator</a> Count is provided, it is
validated, which puts the <a href="Tabulator.html">Tabulator</a> either
into an initial state, or into a state where some votes have been counted,
depending on whether or not error-free Counter Counts appear within the <a
href="Tabulator.html">Tabulator</a> Count. This is how the <a
href="Tabulator.html">Tabulator</a> is instantiated.
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000032.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000032.html');return false;">
          <span class="method-name">validate_counter_count</span><span class="method-args">(counter_count, errwarn = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>counter_count</em>: (<em>Hash</em>) Counter Count object

</li>
<li><em>errwarn</em>: (<em>Boolean</em>) (see <a
href="TabulatorValidate.html#M000023">validate_errors_warnings</a>)

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
A Counter Count is valid iff:
</p>
<ol>
<li>the Counter UID exists,

</li>
<li>the Precinct UID exists,

</li>
<li>the Election UID exists (matches the only such UID),

</li>
<li>the Jurisdiction UID exists (matches the only such UID),

</li>
<li>the Audit File UID is unique (not a duplicate),

</li>
<li>the Contest Counts are valid, and

</li>
<li>the Question Counts are valid.

</li>
</ol>
<p>
A Warning is generated if the Reporting Group is not recognized.
MORE&#8230;JVC
</p>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000011.html');return false;">
          <span class="method-name">validation_errors</span><span class="method-args">(reset = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <ul>
<li><em>reset</em>: (<em>Boolean</em>) indicates whether to reset the
<b><tt>errors</b></tt> stack (optional)

</li>
</ul>
<p>
Returns: <em>Array</em>
</p>
<p>
Returns the <b><tt>errors</b></tt> message stack, but resets it to empty
first if <em>reset</em> is <em>true</em>
</p>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000012.html');return false;">
          <span class="method-name">validation_warnings</span><span class="method-args">(reset = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>reset</em>: (<em>Boolean</em>) indicates whether to reset the
<b><tt>warnings</b></tt> stack (optional)

</li>
</ul>
<p>
Returns: <em>Array</em>
</p>
<p>
Returns the <b><tt>warnings</b></tt> message stack, but resets it to empty
first if <em>reset</em> is <em>true</em>
</p>
        </div>
      </div>

      <h3 class="section-bar">Private Instance methods</h3>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000019.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000019.html');return false;">
          <span class="method-name">new_tabulator_count</span><span class="method-args">(jurisdiction_definition, election_definition, file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>jurisdiction_definition</em>: (<em>Hash</em>) Jurisdiction Definition

</li>
<li><em>election_definition</em>: (<em>Hash</em>) Election Definition

</li>
<li><em>file</em>: (<em>String</em>) File name for <a
href="TabulatorValidate.html#M000010">new</a> <a
href="Tabulator.html">Tabulator</a> Count

</li>
</ul>
<p>
Returns: <em>Hash</em>
</p>
<p>
Returns an initial <a href="Tabulator.html">Tabulator</a> Count constructed
from the information provided by the Jurisdiction Definition, Election
Definition, and File. Uses the side effects of the previously validated
Jurisdiction and Election Definitions (the initialization of the
<b><tt>counts_contests</b></tt> and <b><tt>counts_questions</b></tt>
attributes) to create and insert zero-initialized Contest and Question
Counts into the <a href="Tabulator.html">Tabulator</a> Count, sets its
Counter Count to the empty array, and sets its state to INITIAL.
</p>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000018.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000018.html');return false;">
          <span class="method-name">uid_add</span><span class="method-args">(type, uid)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>type</em>: (<em>String</em>) type of UID, one of
<b><tt>UID_TYPES</b></tt>

</li>
<li><em>uid</em>: (<em>Atomic</em>) UID

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The UID is added to its associated UIDs list. (UIDs are always cast to type
<em>String</em> before being processed.)
</p>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000016.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000016.html');return false;">
          <span class="method-name">uid_exists?</span><span class="method-args">(type, uid)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>type</em>: (<em>String</em>) type of UID, one of
<b><tt>UID_TYPES</b></tt>

</li>
<li><em>uid</em>: (<em>Atomic</em>) UID name

</li>
</ul>
<p>
Returns: <em>Boolean</em>
</p>
<p>
Returns <em>true</em> if a UID named <em>uid</em>, of the specified
<em>type</em>, already exists. (UIDs are always cast to type
<em>String</em> before being processed.)
</p>
        </div>
      </div>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000017.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000017.html');return false;">
          <span class="method-name">uids_exist?</span><span class="method-args">(type)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>type</em>: (<em>String</em>) type of UID, one of
<b><tt>UID_TYPES</b></tt>

</li>
</ul>
<p>
Returns: <em>Boolean</em>
</p>
<p>
Returns <em>true</em> if one or more UIDs of the specified <em>type</em>
already exist.
</p>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000014.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000014.html');return false;">
          <span class="method-name">val_err</span><span class="method-args">(message1, value1 = false, message2 = false, value2 = false, message3 = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>message1</em>: (<em>String</em>) 1st message

</li>
<li><em>value1</em>: (<em>Arbitrary</em>) value for 1st message (optional)

</li>
<li><em>message2</em>: (<em>String</em>) 2nd message (optional)

</li>
<li><em>value2</em>: (<em>Arbitrary</em>) value for 2nd message (optional)

</li>
<li><em>message3</em>: (<em>String</em>) 3rd message (optional)

</li>
</ul>
<p>
Returns: <em>false</em>
</p>
<p>
Constructs the following ERROR message (with the optional bits left out):
<em>message1 (value1) message2 (value2) message3</em>, and then pushes the
message onto the <b><tt>errors</b></tt> stack.
</p>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000013.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000013.html');return false;">
          <span class="method-name">val_fatal</span><span class="method-args">(message1, value1 = &quot;&quot;)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>message1</em>: (<em>String</em>) message

</li>
<li><em>value1</em>: (<em>Arbitrary</em>) value for message1 (optional)

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
Raises an Exception with a FATAL ERROR message. For internal problems only.
Should never be called.
</p>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000015.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000015.html');return false;">
          <span class="method-name">val_warn</span><span class="method-args">(message1, value1 = false, message2 = false, value2 = false, message3 = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>message1</em>: (<em>String</em>) 1st message

</li>
<li><em>value1</em>: (<em>Arbitrary</em>) value for st message (optional)

</li>
<li><em>message2</em>: (<em>String</em>) 2nd message (optional)

</li>
<li><em>value2</em>: (<em>Arbitrary</em>) value for 2nd message (optional)

</li>
<li><em>message3</em>: (<em>String</em>) 3rd message (optional)

</li>
</ul>
<p>
Returns: <em>false</em>
</p>
<p>
Constructs the following WARNING message (with the optional bits left out):
<em>message1 (value1) message2 (value2) message3</em>, and then pushes the
message onto the <b><tt>warnings</b></tt> stack.
</p>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000034.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000034.html');return false;">
          <span class="method-name">validate_candidate_counts</span><span class="method-args">(candidate_counts, conid)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>candidate_counts</em>: (<em>Array</em>) of Candidate Count objects

</li>
<li><em>conid</em>: (<em>Atomic</em>) Contest UID for these Candidates Contest

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Candidate Counts are valid iff:
</p>
<ol>
<li>each Candidate UID exists,

</li>
<li>each Candidate belongs to the Contest,

</li>
<li>no Candidate is duplicated, and

</li>
<li>no Candidates are missing from the Contest.

</li>
</ol>
        </div>
      </div>

      <div id="method-M000027" class="method-detail">
        <a name="M000027"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000027.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000027.html');return false;">
          <span class="method-name">validate_candidates</span><span class="method-args">(candidates)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>candidates</em>: (<em>Array</em>) of Candidate objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Candidates are valid iff:
</p>
<ol>
<li>each Candidate UID is uniquely defined,

</li>
<li>each Candidate&quot;s Contest UID exists (<a
href="TabulatorValidate.html#M000026">validate_contests</a> added it to the
set of Contest UIDs).

</li>
</ol>
<p>
This method also completes the initialization of the
<b><tt>counts_contests</b></tt> attribute, by, for each Candidate, adding a
zero-initialized Candidate Count object to its corresponding Contest Count
object.
</p>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000033.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000033.html');return false;">
          <span class="method-name">validate_contest_counts</span><span class="method-args">(contest_counts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>counts_contests</em>: (<em>Array</em>) of Contest Count objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Contest Counts are valid iff, for each Contest Count:
</p>
<ol>
<li>the Contest UID exists,

</li>
<li>the Contest UID is not duplicated (does not appear in a previously
validated Contest Count),

</li>
<li>all Candidate Counts are valid, and

</li>
<li>all Contests appear in the Contest Count.

</li>
</ol>
        </div>
      </div>

      <div id="method-M000026" class="method-detail">
        <a name="M000026"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000026.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000026.html');return false;">
          <span class="method-name">validate_contests</span><span class="method-args">(contests)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>contests</em>: (<em>Array</em>) of Contest objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Contests are valid iff:
</p>
<ol>
<li>each Contest UID is uniquely defined, and

</li>
<li>each Contest&quot;s District UID exists (<a
href="TabulatorValidate.html#M000022">validate_districts</a> added it to
the set of District UIDs).

</li>
</ol>
<p>
This method also initializes the <b><tt>counts_contests</b></tt> attribute,
by, for each Contest, using the Contest UID as a key under which to hash a
zero-initialized Contest Count object for that Contest.
</p>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000037.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000037.html');return false;">
          <span class="method-name">validate_counter_counts</span><span class="method-args">(counter_counts, errwarn = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>counter_counts</em>: (<em>Array</em>) of Counter Count objects

</li>
<li><em>errwarn</em>: (<em>Boolean</em>) (see <a
href="TabulatorValidate.html#M000023">validate_errors_warnings</a>)

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Counter Counts are valid iff each Counter Count is valid.
</p>
        </div>
      </div>

      <div id="method-M000029" class="method-detail">
        <a name="M000029"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000029.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000029.html');return false;">
          <span class="method-name">validate_counters</span><span class="method-args">(counters)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>counters</em>: (<em>Array</em>) of Counter objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Counters are valid iff:
</p>
<ol>
<li>each Counter UID is uniquely defined.

</li>
</ol>
        </div>
      </div>

      <div id="method-M000022" class="method-detail">
        <a name="M000022"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000022.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000022.html');return false;">
          <span class="method-name">validate_districts</span><span class="method-args">(districts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>districts</em>: (<em>Array</em>) of District objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Districts are valid iff:
</p>
<ol>
<li>each District UID is uniquely defined.

</li>
</ol>
        </div>
      </div>

      <div id="method-M000025" class="method-detail">
        <a name="M000025"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000025.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000025.html');return false;">
          <span class="method-name">validate_election</span><span class="method-args">(election)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>election</em>: (<em>Hash</em>) Election object

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
An Election is valid iff:
</p>
<ol>
<li>the Election UID is unique and no other such are present.

</li>
</ol>
<p>
If the Election UID is not unique and solo, then there is a serious
internal error, as this method should only be called when in an initial
state.
</p>
        </div>
      </div>

      <div id="method-M000024" class="method-detail">
        <a name="M000024"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000024.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000024.html');return false;">
          <span class="method-name">validate_election_definition</span><span class="method-args">(election_definition, errwarn = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>election_definition</em>: (<em>Hash</em>) Election Definition object

</li>
<li><em>errwarn</em>: (<em>Boolean</em>) (see <a
href="TabulatorValidate.html#M000023">validate_errors_warnings</a>)

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
An Election Definition is valid iff:
</p>
<ol>
<li>the Election is valid,

</li>
<li>the Contests are valid,

</li>
<li>the Candidates are valid,

</li>
<li>the Questions are valid,

</li>
<li>the Counters are valid,

</li>
<li>the Reporting Groups are valid (if present, warning otherwise), and

</li>
<li>the Expected Counts are valid (if present, warning otherwise).

</li>
</ol>
        </div>
      </div>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000023.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000023.html');return false;">
          <span class="method-name">validate_errors_warnings</span><span class="method-args">(object, name, errwarn)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>object</em>: (<em>Hash</em>) Election Definition or Counter Count

</li>
<li><em>name</em>: (<em>String</em>) proper name of object above

</li>
<li><em>errwarn</em>: (<em>Boolean</em>) indicates whether to check existing
errors and warnings (when <em>true</em>) or insert them into the object

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
If <em>errwarn</em> is <em>true</em>, check to ensure that the errors and
warnings stored in the object match exactly the current errors and warnings
of the <a href="Tabulator.html">Tabulator</a>. They should match exactly,
because these were the errors and warnings generated last time this object
was processed (we are re-instantiating the <a
href="Tabulator.html">Tabulator</a>). If they do not match, we have a fatal
internal error, because this should never happen. If <em>errwarn</em> is
<em>false</em>, this is the first time this object has been processed by
the <a href="Tabulator.html">Tabulator</a>, so store any errors and
warnings inside the object, for later consistency checking.
</p>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000031.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000031.html');return false;">
          <span class="method-name">validate_expected_counts</span><span class="method-args">(expected_counts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>expected_counts</em>: (<em>Array</em>) of Expected Count objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Expected Counts are valid iff:
</p>
<ol>
<li>each Counter UID exists,

</li>
<li>each Reporting Group exists, and

</li>
<li>each Precinct UID exists.

</li>
</ol>
<p>
Warnings are generated unless all Counters, Reporting Groups, and Precincts
are mentioned in the Expected Counts.
</p>
        </div>
      </div>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000020.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000020.html');return false;">
          <span class="method-name">validate_jurisdiction_definition</span><span class="method-args">(jurisdiction_definition)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>jurisdiction_definition</em>: (<em>Hash</em>) Jurisdiction Definition
object

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
A Jurisdiction Definition is valid iff:
</p>
<ol>
<li>the Districts are valid, and

</li>
<li>the Precincts are valid.

</li>
</ol>
<p>
If the Jurisdiction UID is not unique and solo, then there is a serious
internal error, as this method should only be called in an initial state.
</p>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000021.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000021.html');return false;">
          <span class="method-name">validate_precincts</span><span class="method-args">(precincts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>precincts</em>: (<em>Array</em>) of Precinct objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Precincts are valid iff:
</p>
<ol>
<li>each Precinct UID is uniquely defined.

</li>
</ol>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000035.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000035.html');return false;">
          <span class="method-name">validate_question_counts</span><span class="method-args">(question_counts)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>question_counts</em>: (<em>Array</em>) of Question Count objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Question Counts are valid iff, for each Question Count:
</p>
<ol>
<li>the Question UID exists,

</li>
<li>the Question is not duplicated (does not appear in a previously validated
Question Count),

</li>
<li>no Answer is duplicated within a Question Count,

</li>
<li>each Answer belongs to its Question Count,

</li>
<li>there are no Answers missing from a Question Count, and

</li>
<li>there are no Questions missing from the Question Counts.

</li>
</ol>
        </div>
      </div>

      <div id="method-M000028" class="method-detail">
        <a name="M000028"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000028.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000028.html');return false;">
          <span class="method-name">validate_questions</span><span class="method-args">(questions)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>questions</em>: (<em>Array</em>) of Question objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Questions are valid iff:
</p>
<ol>
<li>each Question UID is uniquely defined,

</li>
<li>each Question&quot;s District UID exists (<a
href="TabulatorValidate.html#M000022">validate_districts</a> added it to
the set of District UIDs), and

</li>
<li>no Answers are duplicated.

</li>
</ol>
<p>
This method also initializes the <b><tt>counts_questions</b></tt>
attribute, by, for each Question, using its Question UID as a key under
which to hash a zero-initialized Question Count object for the Question.
</p>
        </div>
      </div>

      <div id="method-M000030" class="method-detail">
        <a name="M000030"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000030.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000030.html');return false;">
          <span class="method-name">validate_reporting_groups</span><span class="method-args">(reporting_groups)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>reporting_groups</em>: (<em>Array</em>) of Reporting Group objects

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
The Reporting Groups are valid iff:
</p>
<ol>
<li>they are all unique (there are no duplicate group names).

</li>
</ol>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="TabulatorValidate.src/M000036.html" target="Code" class="method-signature"
            onclick="popupCode('TabulatorValidate.src/M000036.html');return false;">
          <span class="method-name">validate_tabulator_count</span><span class="method-args">(tabulator_count)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Arguments:
</p>
<ul>
<li><em>tabulator_count</em>: (<em>Hash</em>) <a
href="Tabulator.html">Tabulator</a> Count object

</li>
</ul>
<p>
Returns: N/A
</p>
<p>
This methods expects to be called only when the <a
href="Tabulator.html">Tabulator</a> is in its initial state. A <a
href="Tabulator.html">Tabulator</a> Count is valid iff:
</p>
<ol>
<li>the Jurisdiction Definition is valid (this begins the initialization of the
<a href="Tabulator.html">Tabulator</a>, by initializing the
<b><tt>uids</b></tt> for Jurisdiction, Precincts and Districts),

</li>
<li>the Election Definition is valid (this completes the initialization of the
<a href="Tabulator.html">Tabulator</a>, by initializing the remaining
<b><tt>uids</b></tt> and the <b><tt>counts_contests</b></tt>, and
<b><tt>counts_questions</b></tt> attributes),

</li>
<li>the Election UID exists (matches the only such UID),

</li>
<li>the Jurisdiction UID exists (matches the only such UID),

</li>
<li>all Contest Counts are valid (this finalizes the
<b><tt>counts_contests</b></tt> attribute), and

</li>
<li>all Question Counts are valid (this finalizes the
<b><tt>counts_questions</b></tt> attribute).

</li>
<li>all Counter Counts are valid (this finalizes the
<b><tt>counts_accumulated</b></tt> attribute).

</li>
</ol>
<p>
An invalid <a href="Tabulator.html">Tabulator</a> Count could imply the
presence of a serious and fatal internal error in the <a
href="Tabulator.html">Tabulator</a>, as all <a
href="Tabulator.html">Tabulator</a> Counts are validated before being
output.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>